image: registry.gitlab.com/wylieyyyy/shellfront:latest

stages:
    - build
    - make
    - test

build-pkg:
    stage: build
    script:
        - autoreconf -i
    artifacts:
        paths:
            - "*"

make-pkg:
    stage: make
    script:
        - ./configure
        - make

test:
    stage: test
    script:
        - ./configure --enable-unit-tests
        - make
        - src/test
        - gcovr -e src/t_*.c -r src --branches
